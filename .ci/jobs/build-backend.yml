.backend_changes: &backend_changes
  - apps/backend/**/*
  - .ci/**/*
  - package.json

build-backend:
  stage: build
  script:
    - pnpm build --filter=backend...
  rules:
    - if: '$CI_COMMIT_BRANCH != "dev" && $CI_PIPELINE_SOURCE == "merge_request_event"'
      changes: *backend_changes
      when: always
    - when: manual
