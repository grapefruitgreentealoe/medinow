variables:
  NODE_ENV: production
  PNPM_HOME: /root/.pnpm
  DOCKER_DRIVER: overlay2
  DOCKER_IMAGE_FRONTEND: grapefruitgreentealoe/medinow-frontend
  DOCKER_IMAGE_BACKEND: grapefruitgreentealoe/medinow-backend

.default-change-paths: &default_changes
  - scripts/**/*
  - .ci/**/*
  - pnpm-lock.yaml
  - package.json
  - pnpm-workspace.yaml

.frontend_changes: &frontend_changes
  - apps/frontend/**/*
  - scripts/**/*
  - .ci/**/*
  - pnpm-lock.yaml
  - package.json
  - pnpm-workspace.yaml

.backend_changes: &backend_changes
  - apps/backend/**/*
  - scripts/**/*
  - .ci/**/*
  - pnpm-lock.yaml
  - package.json
  - pnpm-workspace.yaml

default:
  image: node:20

before_script:
  - corepack enable
  - corepack prepare pnpm@latest --activate
  - pnpm install
